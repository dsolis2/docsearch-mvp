!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.RAGChat=e():n.RAGChat=e()}(this,function(){return function(){"use strict";var n={56:function(n,e,t){n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:function(n){var e=[];function t(n){for(var t=-1,a=0;a<e.length;a++)if(e[a].identifier===n){t=a;break}return t}function a(n,a){for(var s={},i=[],o=0;o<n.length;o++){var c=n[o],d=a.base?c[0]+a.base:c[0],g=s[d]||0,l="".concat(d," ").concat(g);s[d]=g+1;var m=t(l),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)e[m].references++,e[m].updater(h);else{var u=r(h,a);a.byIndex=o,e.splice(o,0,{identifier:l,updater:u,references:1})}i.push(l)}return i}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var s=a(n=n||[],r=r||{});return function(n){n=n||[];for(var i=0;i<s.length;i++){var o=t(s[i]);e[o].references--}for(var c=a(n,r),d=0;d<s.length;d++){var g=t(s[d]);0===e[g].references&&(e[g].updater(),e.splice(g,1))}s=c}}},113:function(n){n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:function(n){n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",a=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),a&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),a&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,a,r,s){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(a)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(i[c]=!0)}for(var d=0;d<n.length;d++){var g=[].concat(n[d]);a&&i[g[0]]||(void 0!==s&&(void 0===g[5]||(g[1]="@layer".concat(g[5].length>0?" ".concat(g[5]):""," {").concat(g[1],"}")),g[5]=s),t&&(g[2]?(g[1]="@media ".concat(g[2]," {").concat(g[1],"}"),g[2]=t):g[2]=t),r&&(g[4]?(g[1]="@supports (".concat(g[4],") {").concat(g[1],"}"),g[4]=r):g[4]="".concat(r)),e.push(g))}},e}},354:function(n){n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),s="/*# ".concat(r," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},540:function(n){n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},659:function(n){var e={};n.exports=function(n,t){var a=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},754:function(n,e,t){var a=t(354),r=t.n(a),s=t(314),i=t.n(s)()(r());i.push([n.id,'/* RAG Chat Components Styles */\n\n:root {\n  --rag-primary-color: #2563eb;\n  --rag-secondary-color: #64748b;\n  --rag-background-color: #ffffff;\n  --rag-surface-color: #f8fafc;\n  --rag-border-color: #e2e8f0;\n  --rag-text-primary: #1e293b;\n  --rag-text-secondary: #64748b;\n  --rag-text-muted: #94a3b8;\n  --rag-error-color: #dc2626;\n  --rag-success-color: #059669;\n  --rag-warning-color: #d97706;\n  \n  --rag-border-radius: 0.5rem;\n  --rag-border-radius-sm: 0.25rem;\n  --rag-spacing-xs: 0.25rem;\n  --rag-spacing-sm: 0.5rem;\n  --rag-spacing-md: 1rem;\n  --rag-spacing-lg: 1.5rem;\n  --rag-spacing-xl: 2rem;\n  \n  --rag-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n  --rag-font-size-sm: 0.875rem;\n  --rag-font-size-base: 1rem;\n  --rag-font-size-lg: 1.125rem;\n  \n  --rag-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n  --rag-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --rag-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n}\n\n/* Base component styles */\n.rag-component {\n  font-family: var(--rag-font-family);\n  font-size: var(--rag-font-size-base);\n  line-height: 1.5;\n  color: var(--rag-text-primary);\n  box-sizing: border-box;\n}\n\n.rag-component *,\n.rag-component *::before,\n.rag-component *::after {\n  box-sizing: inherit;\n}\n\n/* Chat Interface */\n.rag-chat-interface {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 600px;\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius);\n  overflow: hidden;\n  box-shadow: var(--rag-shadow-lg);\n}\n\n/* Message List */\n.rag-message-list {\n  flex: 1;\n  padding: var(--rag-spacing-md);\n  overflow-y: auto;\n  background: var(--rag-surface-color);\n}\n\n.rag-message {\n  margin-bottom: var(--rag-spacing-md);\n  display: flex;\n  flex-direction: column;\n}\n\n.rag-message--user {\n  align-items: flex-end;\n}\n\n.rag-message--assistant {\n  align-items: flex-start;\n}\n\n.rag-message__content {\n  max-width: 80%;\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  border-radius: var(--rag-border-radius);\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n.rag-message--user .rag-message__content {\n  background: var(--rag-primary-color);\n  color: white;\n  border-bottom-right-radius: var(--rag-border-radius-sm);\n}\n\n.rag-message--assistant .rag-message__content {\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-bottom-left-radius: var(--rag-border-radius-sm);\n}\n\n.rag-message__timestamp {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-muted);\n  margin-top: var(--rag-spacing-xs);\n  padding: 0 var(--rag-spacing-sm);\n}\n\n.rag-message__status {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  margin-top: var(--rag-spacing-xs);\n  padding: 0 var(--rag-spacing-sm);\n  font-style: italic;\n}\n\n.rag-message--streaming .rag-message__content::after {\n  content: "â–‹";\n  animation: rag-cursor-blink 1s infinite;\n}\n\n@keyframes rag-cursor-blink {\n  0%, 50% { opacity: 1; }\n  51%, 100% { opacity: 0; }\n}\n\n/* Input Form */\n.rag-input-form {\n  display: flex;\n  padding: var(--rag-spacing-md);\n  border-top: 1px solid var(--rag-border-color);\n  background: var(--rag-background-color);\n  gap: var(--rag-spacing-sm);\n}\n\n.rag-input-form__textarea {\n  flex: 1;\n  resize: none;\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius);\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  font-family: inherit;\n  font-size: var(--rag-font-size-base);\n  line-height: 1.5;\n  min-height: 2.5rem;\n  max-height: 8rem;\n  transition: border-color 0.2s ease;\n}\n\n.rag-input-form__textarea:focus {\n  outline: none;\n  border-color: var(--rag-primary-color);\n  box-shadow: 0 0 0 3px rgb(37 99 235 / 0.1);\n}\n\n.rag-input-form__textarea:disabled {\n  background: var(--rag-surface-color);\n  cursor: not-allowed;\n}\n\n.rag-input-form__button {\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  background: var(--rag-primary-color);\n  color: white;\n  border: none;\n  border-radius: var(--rag-border-radius);\n  cursor: pointer;\n  font-weight: 500;\n  transition: background-color 0.2s ease;\n  min-width: 4rem;\n}\n\n.rag-input-form__button:hover:not(:disabled) {\n  background: #1d4ed8;\n}\n\n.rag-input-form__button:disabled {\n  background: var(--rag-text-muted);\n  cursor: not-allowed;\n}\n\n/* Citation Panel */\n.rag-citation-panel {\n  border-top: 1px solid var(--rag-border-color);\n  background: var(--rag-surface-color);\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.rag-citation-panel__header {\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  font-weight: 600;\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  border-bottom: 1px solid var(--rag-border-color);\n  background: var(--rag-background-color);\n}\n\n.rag-citation-panel__list {\n  padding: var(--rag-spacing-sm);\n}\n\n.rag-citation {\n  display: flex;\n  flex-direction: column;\n  padding: var(--rag-spacing-sm);\n  margin-bottom: var(--rag-spacing-sm);\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius-sm);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.rag-citation:hover {\n  border-color: var(--rag-primary-color);\n  box-shadow: var(--rag-shadow-sm);\n}\n\n.rag-citation__title {\n  font-weight: 600;\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-primary);\n  margin-bottom: var(--rag-spacing-xs);\n}\n\n.rag-citation__snippet {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.rag-citation__meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: var(--rag-spacing-xs);\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-muted);\n}\n\n/* Loading and Error States */\n.rag-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--rag-spacing-lg);\n  color: var(--rag-text-secondary);\n}\n\n.rag-error {\n  padding: var(--rag-spacing-md);\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: var(--rag-border-radius);\n  color: var(--rag-error-color);\n  margin: var(--rag-spacing-sm);\n}\n\n.rag-empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: var(--rag-spacing-xl);\n  text-align: center;\n  color: var(--rag-text-secondary);\n}\n\n.rag-empty-state__icon {\n  font-size: 3rem;\n  margin-bottom: var(--rag-spacing-md);\n  opacity: 0.5;\n}\n\n.rag-empty-state__title {\n  font-size: var(--rag-font-size-lg);\n  font-weight: 600;\n  margin-bottom: var(--rag-spacing-sm);\n}\n\n.rag-empty-state__message {\n  max-width: 300px;\n}\n\n/* Utility Classes */\n.rag-visually-hidden {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n.rag-spinner {\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  border: 2px solid currentColor;\n  border-radius: 50%;\n  border-top-color: transparent;\n  animation: rag-spin 1s linear infinite;\n}\n\n@keyframes rag-spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Responsive Design */\n@media (max-width: 640px) {\n  .rag-chat-interface {\n    height: 100vh;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n  \n  .rag-message__content {\n    max-width: 90%;\n  }\n  \n  .rag-input-form {\n    padding: var(--rag-spacing-sm);\n  }\n}',"",{version:3,sources:["webpack://./src/styles/components.css"],names:[],mappings:"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",sourcesContent:['/* RAG Chat Components Styles */\n\n:root {\n  --rag-primary-color: #2563eb;\n  --rag-secondary-color: #64748b;\n  --rag-background-color: #ffffff;\n  --rag-surface-color: #f8fafc;\n  --rag-border-color: #e2e8f0;\n  --rag-text-primary: #1e293b;\n  --rag-text-secondary: #64748b;\n  --rag-text-muted: #94a3b8;\n  --rag-error-color: #dc2626;\n  --rag-success-color: #059669;\n  --rag-warning-color: #d97706;\n  \n  --rag-border-radius: 0.5rem;\n  --rag-border-radius-sm: 0.25rem;\n  --rag-spacing-xs: 0.25rem;\n  --rag-spacing-sm: 0.5rem;\n  --rag-spacing-md: 1rem;\n  --rag-spacing-lg: 1.5rem;\n  --rag-spacing-xl: 2rem;\n  \n  --rag-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n  --rag-font-size-sm: 0.875rem;\n  --rag-font-size-base: 1rem;\n  --rag-font-size-lg: 1.125rem;\n  \n  --rag-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n  --rag-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --rag-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n}\n\n/* Base component styles */\n.rag-component {\n  font-family: var(--rag-font-family);\n  font-size: var(--rag-font-size-base);\n  line-height: 1.5;\n  color: var(--rag-text-primary);\n  box-sizing: border-box;\n}\n\n.rag-component *,\n.rag-component *::before,\n.rag-component *::after {\n  box-sizing: inherit;\n}\n\n/* Chat Interface */\n.rag-chat-interface {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 600px;\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius);\n  overflow: hidden;\n  box-shadow: var(--rag-shadow-lg);\n}\n\n/* Message List */\n.rag-message-list {\n  flex: 1;\n  padding: var(--rag-spacing-md);\n  overflow-y: auto;\n  background: var(--rag-surface-color);\n}\n\n.rag-message {\n  margin-bottom: var(--rag-spacing-md);\n  display: flex;\n  flex-direction: column;\n}\n\n.rag-message--user {\n  align-items: flex-end;\n}\n\n.rag-message--assistant {\n  align-items: flex-start;\n}\n\n.rag-message__content {\n  max-width: 80%;\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  border-radius: var(--rag-border-radius);\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n.rag-message--user .rag-message__content {\n  background: var(--rag-primary-color);\n  color: white;\n  border-bottom-right-radius: var(--rag-border-radius-sm);\n}\n\n.rag-message--assistant .rag-message__content {\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-bottom-left-radius: var(--rag-border-radius-sm);\n}\n\n.rag-message__timestamp {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-muted);\n  margin-top: var(--rag-spacing-xs);\n  padding: 0 var(--rag-spacing-sm);\n}\n\n.rag-message__status {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  margin-top: var(--rag-spacing-xs);\n  padding: 0 var(--rag-spacing-sm);\n  font-style: italic;\n}\n\n.rag-message--streaming .rag-message__content::after {\n  content: "â–‹";\n  animation: rag-cursor-blink 1s infinite;\n}\n\n@keyframes rag-cursor-blink {\n  0%, 50% { opacity: 1; }\n  51%, 100% { opacity: 0; }\n}\n\n/* Input Form */\n.rag-input-form {\n  display: flex;\n  padding: var(--rag-spacing-md);\n  border-top: 1px solid var(--rag-border-color);\n  background: var(--rag-background-color);\n  gap: var(--rag-spacing-sm);\n}\n\n.rag-input-form__textarea {\n  flex: 1;\n  resize: none;\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius);\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  font-family: inherit;\n  font-size: var(--rag-font-size-base);\n  line-height: 1.5;\n  min-height: 2.5rem;\n  max-height: 8rem;\n  transition: border-color 0.2s ease;\n}\n\n.rag-input-form__textarea:focus {\n  outline: none;\n  border-color: var(--rag-primary-color);\n  box-shadow: 0 0 0 3px rgb(37 99 235 / 0.1);\n}\n\n.rag-input-form__textarea:disabled {\n  background: var(--rag-surface-color);\n  cursor: not-allowed;\n}\n\n.rag-input-form__button {\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  background: var(--rag-primary-color);\n  color: white;\n  border: none;\n  border-radius: var(--rag-border-radius);\n  cursor: pointer;\n  font-weight: 500;\n  transition: background-color 0.2s ease;\n  min-width: 4rem;\n}\n\n.rag-input-form__button:hover:not(:disabled) {\n  background: #1d4ed8;\n}\n\n.rag-input-form__button:disabled {\n  background: var(--rag-text-muted);\n  cursor: not-allowed;\n}\n\n/* Citation Panel */\n.rag-citation-panel {\n  border-top: 1px solid var(--rag-border-color);\n  background: var(--rag-surface-color);\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.rag-citation-panel__header {\n  padding: var(--rag-spacing-sm) var(--rag-spacing-md);\n  font-weight: 600;\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  border-bottom: 1px solid var(--rag-border-color);\n  background: var(--rag-background-color);\n}\n\n.rag-citation-panel__list {\n  padding: var(--rag-spacing-sm);\n}\n\n.rag-citation {\n  display: flex;\n  flex-direction: column;\n  padding: var(--rag-spacing-sm);\n  margin-bottom: var(--rag-spacing-sm);\n  background: var(--rag-background-color);\n  border: 1px solid var(--rag-border-color);\n  border-radius: var(--rag-border-radius-sm);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.rag-citation:hover {\n  border-color: var(--rag-primary-color);\n  box-shadow: var(--rag-shadow-sm);\n}\n\n.rag-citation__title {\n  font-weight: 600;\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-primary);\n  margin-bottom: var(--rag-spacing-xs);\n}\n\n.rag-citation__snippet {\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-secondary);\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.rag-citation__meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: var(--rag-spacing-xs);\n  font-size: var(--rag-font-size-sm);\n  color: var(--rag-text-muted);\n}\n\n/* Loading and Error States */\n.rag-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--rag-spacing-lg);\n  color: var(--rag-text-secondary);\n}\n\n.rag-error {\n  padding: var(--rag-spacing-md);\n  background: #fef2f2;\n  border: 1px solid #fecaca;\n  border-radius: var(--rag-border-radius);\n  color: var(--rag-error-color);\n  margin: var(--rag-spacing-sm);\n}\n\n.rag-empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: var(--rag-spacing-xl);\n  text-align: center;\n  color: var(--rag-text-secondary);\n}\n\n.rag-empty-state__icon {\n  font-size: 3rem;\n  margin-bottom: var(--rag-spacing-md);\n  opacity: 0.5;\n}\n\n.rag-empty-state__title {\n  font-size: var(--rag-font-size-lg);\n  font-weight: 600;\n  margin-bottom: var(--rag-spacing-sm);\n}\n\n.rag-empty-state__message {\n  max-width: 300px;\n}\n\n/* Utility Classes */\n.rag-visually-hidden {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n.rag-spinner {\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  border: 2px solid currentColor;\n  border-radius: 50%;\n  border-top-color: transparent;\n  animation: rag-spin 1s linear infinite;\n}\n\n@keyframes rag-spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Responsive Design */\n@media (max-width: 640px) {\n  .rag-chat-interface {\n    height: 100vh;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n  \n  .rag-message__content {\n    max-width: 90%;\n  }\n  \n  .rag-input-form {\n    padding: var(--rag-spacing-sm);\n  }\n}'],sourceRoot:""}]),e.A=i},825:function(n){n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,r&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(a,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={id:a,exports:{}};return n[a](s,s.exports,t),s.exports}t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,{a:e}),e},t.d=function(n,e){for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.nc=void 0;var a={};t.r(a),t.d(a,{RAGChat:function(){return _},RAGChatInterface:function(){return E},RAGCitationPanel:function(){return B},RAGInputForm:function(){return y},RAGMessageList:function(){return x},configureRAGChat:function(){return w},createRAGChat:function(){return S},default:function(){return M},getRAGChatConfig:function(){return k}});var r=t(72),s=t.n(r),i=t(825),o=t.n(i),c=t(659),d=t.n(c),g=t(56),l=t.n(g),m=t(540),h=t.n(m),u=t(113),p=t.n(u),A=t(754),C={};function f(n="id"){return`${n}-${Math.random().toString(36).substr(2,9)}`}C.styleTagTransform=p(),C.setAttributes=l(),C.insert=d().bind(null,"head"),C.domAPI=o(),C.insertStyleElement=h(),s()(A.A,C),A.A&&A.A.locals&&A.A.locals;class b{constructor(){this.currentSession=null,this.listeners=new Map,this.connectionState="disconnected",this.initializeSession()}static getInstance(){return b.instance||(b.instance=new b),b.instance}initializeSession(){this.currentSession={id:this.generateSessionId(),messages:[],created_at:new Date,updated_at:new Date}}generateSessionId(){return"session_"+Date.now().toString(36)+Math.random().toString(36).substr(2)}getCurrentSession(){return this.currentSession}createNewSession(){return this.currentSession={id:this.generateSessionId(),messages:[],created_at:new Date,updated_at:new Date},this.emit("sessionCreated",this.currentSession),this.currentSession}addMessage(n){this.currentSession||this.initializeSession();const e={...n,id:this.generateMessageId(),timestamp:new Date};return this.currentSession.messages.push(e),this.currentSession.updated_at=new Date,this.emit("messageAdded",e),e}updateMessage(n,e){if(!this.currentSession)return null;const t=this.currentSession.messages.findIndex(e=>e.id===n);if(-1===t)return null;const a={...this.currentSession.messages[t],...e};return this.currentSession.messages[t]=a,this.emit("messageUpdated",a),a}getMessages(){return this.currentSession?.messages||[]}getLastMessage(){const n=this.getMessages();return n.length>0?n[n.length-1]:null}generateMessageId(){return"msg_"+Date.now().toString(36)+Math.random().toString(36).substr(2)}addCitationsToMessage(n,e){this.updateMessage(n,{citations:e})&&this.emit("citationsAdded",{messageId:n,citations:e})}getAllCitations(){return this.getMessages().filter(n=>n.citations).flatMap(n=>n.citations).filter((n,e,t)=>t.findIndex(e=>e.id===n.id)===e)}on(n,e){this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(e)}off(n,e){const t=this.listeners.get(n);t&&(t.delete(e),0===t.size&&this.listeners.delete(n))}emit(n,e){const t=this.listeners.get(n);t&&t.forEach(t=>{try{t(e)}catch(e){console.error(`Error in event listener for ${n}:`,e)}})}setConnectionState(n){this.connectionState!==n&&(this.connectionState=n,this.emit("connectionStateChanged",n))}getConnectionState(){return this.connectionState}clearSession(){this.currentSession&&(this.currentSession.messages=[],this.emit("sessionCleared",this.currentSession))}exportSession(){return JSON.stringify(this.currentSession,null,2)}importSession(n){try{const e=JSON.parse(n);if(e&&e.id&&Array.isArray(e.messages))return this.currentSession={...e,created_at:new Date(e.created_at),updated_at:new Date(e.updated_at)},this.emit("sessionImported",this.currentSession),!0}catch(n){console.error("Failed to import session:",n)}return!1}}class v{constructor(n){this.ws=null,this.reconnectTimer=null,this.pingTimer=null,this.reconnectAttempts=0,this.isIntentionallyClosed=!1,this.listeners=new Map,this.config={url:n.url,reconnectAttempts:n.reconnectAttempts||0,maxReconnectAttempts:n.maxReconnectAttempts||5,reconnectInterval:n.reconnectInterval||3e3,reconnectDelay:n.reconnectDelay||1e3,pingInterval:n.pingInterval||3e4,heartbeatInterval:n.heartbeatInterval||25e3},this.stateManager=b.getInstance()}connect(){return new Promise((n,e)=>{try{this.isIntentionallyClosed=!1,this.stateManager.setConnectionState("connecting"),this.ws=new WebSocket(this.config.url),this.ws.onopen=()=>{console.log("WebSocket connected"),this.stateManager.setConnectionState("connected"),this.reconnectAttempts=0,this.startPing(),this.emit("connected",null),n()},this.ws.onmessage=n=>{this.handleMessage(n.data)},this.ws.onclose=n=>{console.log("WebSocket closed:",n.code,n.reason),this.stateManager.setConnectionState("disconnected"),this.cleanup(),this.emit("disconnected",{code:n.code,reason:n.reason}),this.isIntentionallyClosed||this.scheduleReconnect()},this.ws.onerror=n=>{console.error("WebSocket error:",n),this.emit("error",n),e(n)}}catch(n){console.error("Failed to create WebSocket connection:",n),this.stateManager.setConnectionState("disconnected"),e(n)}})}disconnect(){this.isIntentionallyClosed=!0,this.cleanup(),this.ws&&(this.ws.readyState===WebSocket.OPEN&&this.ws.close(1e3,"Client disconnect"),this.ws=null),this.stateManager.setConnectionState("disconnected")}sendMessage(n,e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return console.warn("WebSocket not connected. Cannot send message."),!1;try{const t={type:n,data:e};return this.ws.send(JSON.stringify(t)),!0}catch(n){return console.error("Failed to send WebSocket message:",n),!1}}sendChatMessage(n,e){return this.sendMessage("chat_message",{message:n,sessionId:e||this.stateManager.getCurrentSession()?.id,timestamp:Date.now()})}handleMessage(n){try{const e=JSON.parse(n);switch(e.type){case"connection_status":break;case"session_start":console.log("Session started:",e.data);break;case"typing_start":this.handleMessageStart(e.data);break;case"message_delta":this.handleMessageChunk(e.data);break;case"message_complete":this.handleMessageComplete(e.data);break;case"citations":this.handleCitations(e.data);break;case"error":this.handleError(e.data);break;default:console.warn("Unknown message type:",e.type)}this.emit("message",e)}catch(n){console.error("Failed to parse WebSocket message:",n)}}handleMessageStart(n){const e=this.stateManager.addMessage({content:"",role:"assistant",status:"streaming",isStreaming:!0});this.emit("messageStart",{messageId:e.id,...n})}handleMessageChunk(n){const e=this.stateManager.getLastMessage();if(e&&"assistant"===e.role&&e.isStreaming){const t=(e.content||"")+(n.content||"");this.stateManager.updateMessage(e.id,{content:t,isStreaming:!0}),this.emit("messageChunk",{messageId:e.id,chunk:n.content})}}handleMessageComplete(n){const e=this.stateManager.getLastMessage();e&&"assistant"===e.role&&(this.stateManager.updateMessage(e.id,{isStreaming:!1,...n.content&&{content:n.content}}),this.emit("messageComplete",{messageId:e.id,...n}))}handleCitations(n){const{messageId:e,citations:t}=n;e&&t&&(this.stateManager.addCitationsToMessage(e,t),this.emit("citations",n))}handleError(n){console.error("WebSocket error from server:",n),this.emit("serverError",n)}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts)return console.error("Max reconnection attempts reached. Giving up."),void this.emit("maxReconnectAttemptsReached",null);this.reconnectAttempts++,console.log(`Scheduling reconnect attempt ${this.reconnectAttempts}/${this.config.maxReconnectAttempts} in ${this.config.reconnectInterval}ms`),this.reconnectTimer=setTimeout(()=>{this.isIntentionallyClosed||(console.log(`Reconnect attempt ${this.reconnectAttempts}`),this.connect().catch(n=>{console.error("Reconnection failed:",n)}))},this.config.reconnectInterval)}startPing(){this.pingTimer=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.sendMessage("ping",null)},this.config.pingInterval)}cleanup(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null)}on(n,e){this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(e)}off(n,e){const t=this.listeners.get(n);t&&(t.delete(e),0===t.size&&this.listeners.delete(n))}emit(n,e){const t=this.listeners.get(n);t&&t.forEach(t=>{try{t(e)}catch(e){console.error(`Error in WebSocket event listener for ${n}:`,e)}})}isConnected(){return this.ws?.readyState===WebSocket.OPEN}getConnectionState(){return this.ws?.readyState}}class E extends HTMLElement{constructor(){super(),this.messages=[],this._isConnected=!1,this._shadowRoot=this.attachShadow({mode:"open"}),this.sessionId=f("session"),this.wsClient=new v({url:`ws://localhost:8000/ws/${this.sessionId}`}),this.setupComponent(),this.setupWebSocketListeners()}connectedCallback(){this.render(),this.setupEventListeners(),this.connectWebSocket(),setTimeout(()=>{const n=this._shadowRoot.querySelector("rag-input-form");n&&n.focus()},100)}disconnectedCallback(){this.cleanup(),this.wsClient&&this.wsClient.disconnect()}setupComponent(){const n=document.createElement("style");n.textContent='\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n        font-family: var(--rag-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif);\n      }\n      \n      .chat-container {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        background: var(--rag-background-color, #ffffff);\n        border: 1px solid var(--rag-border-color, #e2e8f0);\n        border-radius: var(--rag-border-radius, 0.5rem);\n        overflow: hidden;\n        box-shadow: var(--rag-shadow-lg, 0 10px 15px -3px rgb(0 0 0 / 0.1));\n      }\n      \n      .chat-header {\n        padding: 1rem;\n        border-bottom: 1px solid var(--rag-border-color, #e2e8f0);\n        background: var(--rag-surface-color, #f8fafc);\n      }\n      \n      .chat-title {\n        margin: 0;\n        font-size: 1.125rem;\n        font-weight: 600;\n        color: var(--rag-text-primary, #1e293b);\n      }\n      \n      .chat-status {\n        font-size: 0.875rem;\n        color: var(--rag-text-secondary, #64748b);\n        margin-top: 0.25rem;\n      }\n      \n      .connection-indicator {\n        display: inline-block;\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        margin-right: 0.5rem;\n      }\n      \n      .connection-indicator--connected {\n        background-color: var(--rag-success-color, #059669);\n      }\n      \n      .connection-indicator--disconnected {\n        background-color: var(--rag-error-color, #dc2626);\n      }\n      \n      .connection-indicator--connecting {\n        background-color: var(--rag-warning-color, #d97706);\n        animation: pulse 1.5s ease-in-out infinite;\n      }\n      \n      @keyframes pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n    ',this._shadowRoot.appendChild(n)}render(){const n=document.createElement("div");n.className="chat-container";const e=document.createElement("div");e.className="chat-header",e.innerHTML='\n      <h2 class="chat-title">RAG Chat Assistant</h2>\n      <div class="chat-status">\n        <span class="connection-indicator connection-indicator--disconnected"></span>\n        <span class="status-text">Disconnected</span>\n      </div>\n    ';const t=document.createElement("rag-message-list");t.setAttribute("session-id",this.sessionId),this.messageList=t;const a=document.createElement("rag-citation-panel");a.style.display="none",this.citationPanel=a;const r=document.createElement("rag-input-form");r.setAttribute("session-id",this.sessionId),this.inputForm=r,n.appendChild(e),n.appendChild(t),n.appendChild(a),n.appendChild(r),this._shadowRoot.appendChild(n)}setupEventListeners(){this.addEventListener("rag-message-send",this.handleMessageSend.bind(this)),this.addEventListener("rag-citations-received",this.handleCitationsReceived.bind(this)),this.addEventListener("rag-connection-status",this.handleConnectionStatus.bind(this))}handleMessageSend(n){const{message:e}=n.detail,t={id:f("msg"),role:"user",content:e,timestamp:new Date,status:"sent"};this.addMessage(t);const a={id:f("msg"),role:"assistant",content:"",timestamp:new Date,status:"streaming"};this.addMessage(a),this.sendToBackend(e,a.id)}handleCitationsReceived(n){const{citations:e}=n.detail;e&&e.length>0&&this.citationPanel&&(this.citationPanel.style.display="block",this.citationPanel.setCitations(e))}handleConnectionStatus(n){const{status:e}=n.detail;this.updateConnectionStatus(e)}addMessage(n){this.messages.push(n),this.messageList&&this.messageList.addMessage(n)}updateConnectionStatus(n){this._isConnected="connected"===n;const e=this._shadowRoot.querySelector(".connection-indicator"),t=this._shadowRoot.querySelector(".status-text");e&&t&&(e.className=`connection-indicator connection-indicator--${n}`,t.textContent=n.charAt(0).toUpperCase()+n.slice(1)),this.inputForm&&this.inputForm.setEnabled(this._isConnected)}sendToBackend(n,e){if(this.wsClient&&this.wsClient.isConnected())this.wsClient.sendChatMessage(n,this.sessionId);else{console.error("WebSocket not connected, cannot send message");const n=this.messages.find(n=>n.id===e);n&&(n.content="Error: Not connected to backend. Please check your connection.",n.status="error",this.messageList&&this.messageList.updateMessage(n))}}setupWebSocketListeners(){this.wsClient.on("connected",()=>{this.updateConnectionStatus("connected")}),this.wsClient.on("disconnected",()=>{this.updateConnectionStatus("disconnected")}),this.wsClient.on("messageChunk",n=>{this.messageList&&this.messageList.updateStreamingMessage(n.messageId,n.chunk)}),this.wsClient.on("messageComplete",n=>{this.messageList&&this.messageList.completeMessage(n.messageId)}),this.wsClient.on("citations",n=>{this.handleCitationsReceived(new CustomEvent("rag-citations-received",{detail:{citations:n.citations}}))}),this.wsClient.on("serverError",n=>{console.error("Server error:",n),this.addMessage({id:f("msg"),role:"assistant",content:`Error: ${n.error||"Something went wrong"}`,timestamp:new Date,status:"error"})})}async connectWebSocket(){try{this.updateConnectionStatus("connecting"),await this.wsClient.connect()}catch(n){console.error("Failed to connect to WebSocket:",n),this.updateConnectionStatus("disconnected")}}cleanup(){this.wsClient&&this.wsClient.disconnect()}getSessionId(){return this.sessionId}getMessages(){return[...this.messages]}clearMessages(){this.messages=[],this.messageList&&this.messageList.clearMessages(),this.citationPanel&&(this.citationPanel.style.display="none")}}customElements.define("rag-chat-interface",E);class x extends HTMLElement{constructor(){super(),this.messages=[],this._shadowRoot=this.attachShadow({mode:"open"}),this.setupComponent()}connectedCallback(){this.render()}setupComponent(){const n=document.createElement("style");n.textContent='\n      :host {\n        display: block;\n        flex: 1;\n        overflow-y: auto;\n        background: var(--rag-surface-color, #f8fafc);\n      }\n      \n      .message-container {\n        padding: var(--rag-spacing-md, 1rem);\n        min-height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n      \n      .message {\n        margin-bottom: var(--rag-spacing-md, 1rem);\n        display: flex;\n        flex-direction: column;\n        opacity: 0;\n        transform: translateY(10px);\n        animation: messageSlideIn 0.3s ease-out forwards;\n      }\n      \n      @keyframes messageSlideIn {\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      .message--user {\n        align-items: flex-end;\n      }\n      \n      .message--assistant {\n        align-items: flex-start;\n      }\n      \n      .message__content {\n        max-width: 80%;\n        padding: var(--rag-spacing-sm, 0.5rem) var(--rag-spacing-md, 1rem);\n        border-radius: var(--rag-border-radius, 0.5rem);\n        word-wrap: break-word;\n        white-space: pre-wrap;\n        line-height: 1.5;\n        position: relative;\n      }\n      \n      .message--user .message__content {\n        background: var(--rag-primary-color, #2563eb);\n        color: white;\n        border-bottom-right-radius: var(--rag-border-radius-sm, 0.25rem);\n      }\n      \n      .message--assistant .message__content {\n        background: var(--rag-background-color, #ffffff);\n        border: 1px solid var(--rag-border-color, #e2e8f0);\n        color: var(--rag-text-primary, #1e293b);\n        border-bottom-left-radius: var(--rag-border-radius-sm, 0.25rem);\n      }\n      \n      .message__meta {\n        font-size: var(--rag-font-size-sm, 0.875rem);\n        color: var(--rag-text-muted, #94a3b8);\n        margin-top: var(--rag-spacing-xs, 0.25rem);\n        padding: 0 var(--rag-spacing-sm, 0.5rem);\n        display: flex;\n        align-items: center;\n        gap: var(--rag-spacing-sm, 0.5rem);\n      }\n      \n      .message__timestamp {\n        opacity: 0.7;\n      }\n      \n      .message__status {\n        font-style: italic;\n      }\n      \n      .message--streaming .message__content::after {\n        content: "â–‹";\n        animation: cursorBlink 1s infinite;\n        color: var(--rag-primary-color, #2563eb);\n      }\n      \n      .message--user.message--streaming .message__content::after {\n        color: rgba(255, 255, 255, 0.8);\n      }\n      \n      @keyframes cursorBlink {\n        0%, 50% { opacity: 1; }\n        51%, 100% { opacity: 0; }\n      }\n      \n      .message--error .message__content {\n        background: #fef2f2;\n        border-color: #fecaca;\n        color: var(--rag-error-color, #dc2626);\n      }\n      \n      .empty-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: var(--rag-spacing-xl, 2rem);\n        text-align: center;\n        color: var(--rag-text-secondary, #64748b);\n        flex: 1;\n      }\n      \n      .empty-state__icon {\n        font-size: 3rem;\n        margin-bottom: var(--rag-spacing-md, 1rem);\n        opacity: 0.5;\n      }\n      \n      .empty-state__title {\n        font-size: var(--rag-font-size-lg, 1.125rem);\n        font-weight: 600;\n        margin-bottom: var(--rag-spacing-sm, 0.5rem);\n        color: var(--rag-text-primary, #1e293b);\n      }\n      \n      .empty-state__message {\n        max-width: 300px;\n        line-height: 1.5;\n      }\n      \n      .citation-indicators {\n        margin-top: var(--rag-spacing-xs, 0.25rem);\n        display: flex;\n        gap: var(--rag-spacing-xs, 0.25rem);\n        flex-wrap: wrap;\n      }\n      \n      .citation-indicator {\n        display: inline-flex;\n        align-items: center;\n        gap: 0.25rem;\n        padding: 0.125rem 0.375rem;\n        background: var(--rag-primary-color, #2563eb);\n        color: white;\n        border-radius: 0.75rem;\n        font-size: 0.75rem;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n      }\n      \n      .citation-indicator:hover {\n        background: #1d4ed8;\n      }\n      \n      .citation-count {\n        font-weight: 600;\n      }\n    ',this._shadowRoot.appendChild(n)}render(){this.messageContainer=document.createElement("div"),this.messageContainer.className="message-container",this.renderMessages(),this._shadowRoot.appendChild(this.messageContainer)}renderMessages(){0!==this.messages.length?(this.messageContainer.innerHTML="",this.messages.forEach(n=>{const e=this.createMessageElement(n);this.messageContainer.appendChild(e)}),this.scrollToBottom()):this.renderEmptyState()}renderEmptyState(){this.messageContainer.innerHTML='\n      <div class="empty-state">\n        <div class="empty-state__icon">ðŸ’¬</div>\n        <div class="empty-state__title">Start a Conversation</div>\n        <div class="empty-state__message">\n          Ask me anything about your documents. I\'ll search through your knowledge base and provide relevant answers with citations.\n        </div>\n      </div>\n    '}createMessageElement(n){const e=document.createElement("div");e.className=`message message--${n.role}`,e.setAttribute("data-message-id",n.id),n.status&&e.classList.add(`message--${n.status}`);const t=document.createElement("div");t.className="message__content",t.innerHTML=this.formatMessageContent(n.content);const a=document.createElement("div");a.className="message__meta";const r=document.createElement("span");if(r.className="message__timestamp",r.textContent=function(n){const e=(new Date).getTime()-n.getTime(),t=Math.floor(e/1e3),a=Math.floor(t/60),r=Math.floor(a/60);return Math.floor(r/24)>0?n.toLocaleDateString():r>0?`${r}h ago`:a>0?`${a}m ago`:"Just now"}(n.timestamp),a.appendChild(r),n.status&&"completed"!==n.status&&"sent"!==n.status){const e=document.createElement("span");e.className="message__status",e.textContent=this.getStatusText(n.status),a.appendChild(e)}if(e.appendChild(t),e.appendChild(a),n.citations&&n.citations.length>0){const t=this.createCitationIndicators(n.citations);e.appendChild(t)}return e}formatMessageContent(n){return function(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}(n)}getStatusText(n){switch(n){case"sending":return"Sending...";case"streaming":return"Typing...";case"error":return"Error";default:return""}}createCitationIndicators(n){const e=document.createElement("div");e.className="citation-indicators";const t=document.createElement("button");return t.className="citation-indicator",t.innerHTML=`\n      <span class="citation-count">${n.length}</span>\n      <span>source${n.length>1?"s":""}</span>\n    `,t.addEventListener("click",()=>{const e=new CustomEvent("rag-citations-received",{detail:{citations:n},bubbles:!0});this.dispatchEvent(e)}),e.appendChild(t),e}scrollToBottom(){requestAnimationFrame(()=>{this.scrollTop=this.scrollHeight})}addMessage(n){this.messages.push(n),this.renderMessages()}updateMessage(n){const e=this.messages.findIndex(e=>e.id===n.id);if(-1!==e){this.messages[e]=n;const t=this._shadowRoot.querySelector(`[data-message-id="${n.id}"]`);if(t){const e=this.createMessageElement(n);t.replaceWith(e)}}}clearMessages(){this.messages=[],this.renderMessages()}getMessages(){return[...this.messages]}streamMessageUpdate(n,e){const t=this.messages.find(e=>e.id===n);if(t){t.content+=e;const a=this._shadowRoot.querySelector(`[data-message-id="${n}"] .message__content`);a&&(a.innerHTML=this.formatMessageContent(t.content)),this.scrollToBottom()}}}customElements.define("rag-message-list",x);class y extends HTMLElement{constructor(){super(),this.isEnabled=!0,this.isSubmitting=!1,this._shadowRoot=this.attachShadow({mode:"open"}),this.setupComponent()}connectedCallback(){this.render(),this.setupEventListeners()}setupComponent(){const n=document.createElement("style");n.textContent="\n      :host {\n        display: block;\n        border-top: 1px solid var(--rag-border-color, #e2e8f0);\n        background: var(--rag-background-color, #ffffff);\n      }\n      \n      .input-form {\n        display: flex;\n        padding: var(--rag-spacing-md, 1rem);\n        gap: var(--rag-spacing-sm, 0.5rem);\n        align-items: flex-end;\n      }\n      \n      .input-wrapper {\n        flex: 1;\n        position: relative;\n      }\n      \n      .textarea {\n        width: 100%;\n        resize: none;\n        border: 1px solid var(--rag-border-color, #e2e8f0);\n        border-radius: var(--rag-border-radius, 0.5rem);\n        padding: var(--rag-spacing-sm, 0.5rem) var(--rag-spacing-md, 1rem);\n        font-family: inherit;\n        font-size: var(--rag-font-size-base, 1rem);\n        line-height: 1.5;\n        min-height: 2.5rem;\n        max-height: 8rem;\n        transition: all 0.2s ease;\n        outline: none;\n        background: var(--rag-background-color, #ffffff);\n        color: var(--rag-text-primary, #1e293b);\n      }\n      \n      .textarea:focus {\n        border-color: var(--rag-primary-color, #2563eb);\n        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n      }\n      \n      .textarea:disabled {\n        background: var(--rag-surface-color, #f8fafc);\n        color: var(--rag-text-muted, #94a3b8);\n        cursor: not-allowed;\n      }\n      \n      .textarea::placeholder {\n        color: var(--rag-text-muted, #94a3b8);\n      }\n      \n      .submit-button {\n        padding: var(--rag-spacing-sm, 0.5rem) var(--rag-spacing-md, 1rem);\n        background: var(--rag-primary-color, #2563eb);\n        color: white;\n        border: none;\n        border-radius: var(--rag-border-radius, 0.5rem);\n        cursor: pointer;\n        font-weight: 500;\n        transition: all 0.2s ease;\n        min-width: 4rem;\n        height: 2.5rem;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 0.5rem;\n        white-space: nowrap;\n      }\n      \n      .submit-button:hover:not(:disabled) {\n        background: #1d4ed8;\n        transform: translateY(-1px);\n      }\n      \n      .submit-button:active {\n        transform: translateY(0);\n      }\n      \n      .submit-button:disabled {\n        background: var(--rag-text-muted, #94a3b8);\n        cursor: not-allowed;\n        transform: none;\n      }\n      \n      .submit-button--loading {\n        pointer-events: none;\n      }\n      \n      .spinner {\n        width: 1rem;\n        height: 1rem;\n        border: 2px solid currentColor;\n        border-radius: 50%;\n        border-top-color: transparent;\n        animation: spin 1s linear infinite;\n      }\n      \n      @keyframes spin {\n        to {\n          transform: rotate(360deg);\n        }\n      }\n      \n      .char-counter {\n        position: absolute;\n        bottom: 0.5rem;\n        right: 0.75rem;\n        font-size: 0.75rem;\n        color: var(--rag-text-muted, #94a3b8);\n        background: var(--rag-background-color, #ffffff);\n        padding: 0 0.25rem;\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity 0.2s ease;\n      }\n      \n      .char-counter--visible {\n        opacity: 1;\n      }\n      \n      .char-counter--warning {\n        color: var(--rag-warning-color, #d97706);\n      }\n      \n      .char-counter--error {\n        color: var(--rag-error-color, #dc2626);\n      }\n      \n      .keyboard-hint {\n        font-size: 0.75rem;\n        color: var(--rag-text-muted, #94a3b8);\n        margin-top: 0.25rem;\n        text-align: center;\n        opacity: 0.7;\n      }\n      \n      @media (max-width: 640px) {\n        .input-form {\n          padding: var(--rag-spacing-sm, 0.5rem);\n        }\n        \n        .keyboard-hint {\n          display: none;\n        }\n      }\n    ",this._shadowRoot.appendChild(n)}render(){const n=document.createElement("div");n.className="input-form";const e=document.createElement("div");e.className="input-wrapper",this.textarea=document.createElement("textarea"),this.textarea.className="textarea",this.textarea.placeholder="Ask me anything about your documents...",this.textarea.rows=1,this.textarea.setAttribute("aria-label","Message input");const t=document.createElement("div");t.className="char-counter",t.setAttribute("aria-live","polite"),e.appendChild(this.textarea),e.appendChild(t),this.submitButton=document.createElement("button"),this.submitButton.className="submit-button",this.submitButton.type="submit",this.submitButton.setAttribute("aria-label","Send message"),this.submitButton.innerHTML='\n      <span class="button-text">Send</span>\n    ',n.appendChild(e),n.appendChild(this.submitButton);const a=document.createElement("div");a.className="keyboard-hint",a.textContent="Press Enter to send, Shift+Enter for new line";const r=document.createElement("div");r.appendChild(n),r.appendChild(a),this._shadowRoot.appendChild(r)}setupEventListeners(){this.textarea.addEventListener("input",()=>{this.autoResize(),this.updateCharCounter()}),this.textarea.addEventListener("keydown",n=>{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),this.handleSubmit()),"Escape"===n.key&&(this.textarea.value="",this.autoResize(),this.updateCharCounter())}),this.submitButton.addEventListener("click",()=>{this.handleSubmit()}),this.textarea.addEventListener("focus",()=>{this.showCharCounter()}),this.textarea.addEventListener("blur",function(n){let e;return(...t)=>{clearTimeout(e),e=setTimeout(()=>n.apply(null,t),1e3)}}(()=>{this.textarea.value.trim()||this.hideCharCounter()}))}autoResize(){this.textarea.style.height="auto";const n=Math.min(this.textarea.scrollHeight,192);this.textarea.style.height=`${n}px`}updateCharCounter(){const n=this._shadowRoot.querySelector(".char-counter"),e=this.textarea.value.length;n.textContent=`${e}/2000`,n.classList.remove("char-counter--warning","char-counter--error"),e>1800?n.classList.add("char-counter--error"):e>1600&&n.classList.add("char-counter--warning"),this.submitButton.disabled=e>2e3||0===e||!this.isEnabled||this.isSubmitting}showCharCounter(){this._shadowRoot.querySelector(".char-counter").classList.add("char-counter--visible")}hideCharCounter(){this._shadowRoot.querySelector(".char-counter").classList.remove("char-counter--visible")}handleSubmit(){const n=this.textarea.value.trim();if(!n||!this.isEnabled||this.isSubmitting)return;this.setSubmitting(!0);const e=new CustomEvent("rag-message-send",{detail:{message:n},bubbles:!0});this.dispatchEvent(e),this.textarea.value="",this.autoResize(),this.updateCharCounter(),this.hideCharCounter(),setTimeout(()=>{this.setSubmitting(!1)},500)}setSubmitting(n){this.isSubmitting=n,n?(this.submitButton.classList.add("submit-button--loading"),this.submitButton.innerHTML='\n        <div class="spinner"></div>\n        <span class="button-text">Sending...</span>\n      '):(this.submitButton.classList.remove("submit-button--loading"),this.submitButton.innerHTML='\n        <span class="button-text">Send</span>\n      '),this.updateButtonState()}updateButtonState(){const n=this.textarea.value.trim().length>0,e=this.textarea.value.length>2e3;this.submitButton.disabled=!n||!this.isEnabled||this.isSubmitting||e}focus(){this.textarea.focus()}setValue(n){this.textarea.value=n,this.autoResize(),this.updateCharCounter()}getValue(){return this.textarea.value}setEnabled(n){this.isEnabled=n,this.textarea.disabled=!n,this.updateButtonState(),this.textarea.placeholder=n?"Ask me anything about your documents...":"Connecting to server..."}clear(){this.textarea.value="",this.autoResize(),this.updateCharCounter(),this.hideCharCounter()}}customElements.define("rag-input-form",y);class B extends HTMLElement{constructor(){super(),this.citations=[],this.isVisible=!1,this._shadowRoot=this.attachShadow({mode:"open"}),this.setupComponent()}connectedCallback(){this.render()}setupComponent(){const n=document.createElement("style");n.textContent="\n      :host {\n        display: block;\n        background: var(--rag-surface-color, #f8fafc);\n        border-top: 1px solid var(--rag-border-color, #e2e8f0);\n        max-height: 250px;\n        overflow: hidden;\n        transition: all 0.3s ease;\n      }\n      \n      :host([hidden]) {\n        display: none;\n      }\n      \n      .citation-panel {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n      }\n      \n      .panel-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: var(--rag-spacing-sm, 0.5rem) var(--rag-spacing-md, 1rem);\n        background: var(--rag-background-color, #ffffff);\n        border-bottom: 1px solid var(--rag-border-color, #e2e8f0);\n        font-size: var(--rag-font-size-sm, 0.875rem);\n        font-weight: 600;\n        color: var(--rag-text-secondary, #64748b);\n      }\n      \n      .panel-title {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      \n      .citation-count {\n        background: var(--rag-primary-color, #2563eb);\n        color: white;\n        padding: 0.125rem 0.375rem;\n        border-radius: 0.75rem;\n        font-size: 0.75rem;\n        font-weight: 500;\n      }\n      \n      .close-button {\n        background: none;\n        border: none;\n        cursor: pointer;\n        padding: 0.25rem;\n        border-radius: 0.25rem;\n        color: var(--rag-text-muted, #94a3b8);\n        transition: all 0.2s ease;\n      }\n      \n      .close-button:hover {\n        background: var(--rag-surface-color, #f8fafc);\n        color: var(--rag-text-secondary, #64748b);\n      }\n      \n      .citation-list {\n        flex: 1;\n        overflow-y: auto;\n        padding: var(--rag-spacing-sm, 0.5rem);\n      }\n      \n      .citation {\n        display: flex;\n        flex-direction: column;\n        padding: var(--rag-spacing-sm, 0.5rem);\n        margin-bottom: var(--rag-spacing-sm, 0.5rem);\n        background: var(--rag-background-color, #ffffff);\n        border: 1px solid var(--rag-border-color, #e2e8f0);\n        border-radius: var(--rag-border-radius-sm, 0.25rem);\n        cursor: pointer;\n        transition: all 0.2s ease;\n        text-decoration: none;\n        color: inherit;\n      }\n      \n      .citation:hover {\n        border-color: var(--rag-primary-color, #2563eb);\n        box-shadow: var(--rag-shadow-sm, 0 1px 2px 0 rgb(0 0 0 / 0.05));\n        transform: translateY(-1px);\n      }\n      \n      .citation:last-child {\n        margin-bottom: 0;\n      }\n      \n      .citation__header {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: var(--rag-spacing-xs, 0.25rem);\n        gap: var(--rag-spacing-sm, 0.5rem);\n      }\n      \n      .citation__title {\n        font-weight: 600;\n        font-size: var(--rag-font-size-sm, 0.875rem);\n        color: var(--rag-text-primary, #1e293b);\n        line-height: 1.4;\n        flex: 1;\n        margin: 0;\n      }\n      \n      .citation__score {\n        font-size: 0.75rem;\n        color: var(--rag-text-muted, #94a3b8);\n        background: var(--rag-surface-color, #f8fafc);\n        padding: 0.125rem 0.375rem;\n        border-radius: 0.75rem;\n        white-space: nowrap;\n        flex-shrink: 0;\n      }\n      \n      .citation__snippet {\n        font-size: var(--rag-font-size-sm, 0.875rem);\n        color: var(--rag-text-secondary, #64748b);\n        line-height: 1.4;\n        margin-bottom: var(--rag-spacing-xs, 0.25rem);\n        display: -webkit-box;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n      }\n      \n      .citation__meta {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 0.75rem;\n        color: var(--rag-text-muted, #94a3b8);\n        gap: var(--rag-spacing-sm, 0.5rem);\n      }\n      \n      .citation__file-info {\n        display: flex;\n        align-items: center;\n        gap: 0.25rem;\n        flex: 1;\n      }\n      \n      .file-type-badge {\n        padding: 0.0625rem 0.25rem;\n        background: var(--rag-primary-color, #2563eb);\n        color: white;\n        border-radius: 0.25rem;\n        font-size: 0.625rem;\n        font-weight: 600;\n        text-transform: uppercase;\n      }\n      \n      .citation__page {\n        white-space: nowrap;\n      }\n      \n      .external-link-icon {\n        width: 0.875rem;\n        height: 0.875rem;\n        opacity: 0.5;\n        transition: opacity 0.2s ease;\n      }\n      \n      .citation:hover .external-link-icon {\n        opacity: 1;\n      }\n      \n      .empty-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: var(--rag-spacing-xl, 2rem);\n        text-align: center;\n        color: var(--rag-text-secondary, #64748b);\n      }\n      \n      .empty-state__icon {\n        font-size: 2rem;\n        margin-bottom: var(--rag-spacing-sm, 0.5rem);\n        opacity: 0.5;\n      }\n      \n      .empty-state__message {\n        font-size: var(--rag-font-size-sm, 0.875rem);\n      }\n      \n      /* Scrollbar styling */\n      .citation-list::-webkit-scrollbar {\n        width: 6px;\n      }\n      \n      .citation-list::-webkit-scrollbar-track {\n        background: var(--rag-surface-color, #f8fafc);\n      }\n      \n      .citation-list::-webkit-scrollbar-thumb {\n        background: var(--rag-border-color, #e2e8f0);\n        border-radius: 3px;\n      }\n      \n      .citation-list::-webkit-scrollbar-thumb:hover {\n        background: var(--rag-text-muted, #94a3b8);\n      }\n    ",this._shadowRoot.appendChild(n)}render(){const n=document.createElement("div");n.className="citation-panel";const e=document.createElement("div");e.className="panel-header";const t=document.createElement("div");t.className="panel-title",t.innerHTML=`\n      <span>Sources</span>\n      <span class="citation-count">${this.citations.length}</span>\n    `;const a=document.createElement("button");a.className="close-button",a.innerHTML="âœ•",a.setAttribute("aria-label","Close citations panel"),a.addEventListener("click",()=>this.hide()),e.appendChild(t),e.appendChild(a);const r=document.createElement("div");r.className="citation-list",this.renderCitations(r),n.appendChild(e),n.appendChild(r),this._shadowRoot.appendChild(n)}renderCitations(n){0!==this.citations.length?(n.innerHTML="",this.citations.forEach((e,t)=>{const a=this.createCitationElement(e,t);n.appendChild(a)})):this.renderEmptyState(n)}renderEmptyState(n){n.innerHTML='\n      <div class="empty-state">\n        <div class="empty-state__icon">ðŸ“„</div>\n        <div class="empty-state__message">\n          No sources available for this message\n        </div>\n      </div>\n    '}createCitationElement(n,e){const t=document.createElement("a");t.className="citation",t.href=n.source_file_url,t.target="_blank",t.rel="noopener noreferrer";const a=document.createElement("div");a.className="citation__header";const r=document.createElement("h4");if(r.className="citation__title",r.textContent=n.source_file_name,a.appendChild(r),void 0!==n.relevance_score){const e=document.createElement("div");e.className="citation__score",e.textContent=`${Math.round(100*n.relevance_score)}%`,a.appendChild(e)}const s=document.createElement("div");s.className="citation__snippet",s.textContent=n.content_snippet;const i=document.createElement("div");i.className="citation__meta";const o=document.createElement("div");if(o.className="citation__file-info",n.metadata?.file_type){const e=document.createElement("span");e.className="file-type-badge",e.textContent=this.getFileTypeDisplay(n.metadata.file_type),o.appendChild(e)}const c=document.createElement("span");if(c.textContent=this.truncateFileName(n.source_file_name,30),o.appendChild(c),i.appendChild(o),n.page_number){const e=document.createElement("div");e.className="citation__page",e.textContent=`Page ${n.page_number}`,i.appendChild(e)}const d=document.createElement("div");return d.className="external-link-icon",d.innerHTML="â†—",i.appendChild(d),t.appendChild(a),t.appendChild(s),t.appendChild(i),t.addEventListener("click",()=>{this.trackCitationClick(n,e)}),t}getFileTypeDisplay(n){return{pdf:"PDF",doc:"DOC",docx:"DOCX",txt:"TXT",md:"MD",html:"HTML",xlsx:"XLSX",pptx:"PPTX"}[n.toLowerCase()]||n.toUpperCase()}truncateFileName(n,e){if(n.length<=e)return n;const t=n.split(".").pop();return`${n.substring(0,n.lastIndexOf(".")).substring(0,e-t.length-4)+"..."}.${t}`}trackCitationClick(n,e){const t=new CustomEvent("rag-citation-clicked",{detail:{citation:n,index:e},bubbles:!0});this.dispatchEvent(t)}updateHeader(){const n=this._shadowRoot.querySelector(".citation-count");n&&(n.textContent=this.citations.length.toString())}setCitations(n){this.citations=n,this.updateHeader();const e=this._shadowRoot.querySelector(".citation-list");e&&this.renderCitations(e)}addCitation(n){this.citations.push(n),this.setCitations(this.citations)}clearCitations(){this.citations=[],this.setCitations(this.citations)}show(){this.isVisible=!0,this.style.display="block";const n=new CustomEvent("rag-citation-panel-show",{bubbles:!0});this.dispatchEvent(n)}hide(){this.isVisible=!1,this.style.display="none";const n=new CustomEvent("rag-citation-panel-hide",{bubbles:!0});this.dispatchEvent(n)}toggle(){this.isVisible?this.hide():this.show()}getCitations(){return[...this.citations]}isShowing(){return this.isVisible}}function w(n={}){const e=document.documentElement;e.style.setProperty("--rag-background-color","#ffffff"),e.style.setProperty("--rag-surface-color","#f8fafc"),e.style.setProperty("--rag-text-primary","#1e293b"),e.style.setProperty("--rag-text-secondary","#64748b"),e.style.setProperty("--rag-border-color","#e2e8f0"),n.model="gpt-4o-mini",window.RAGChatConfig=n}function k(){return window.RAGChatConfig||{}}customElements.define("rag-citation-panel",B);class _{constructor(n,e={}){if("string"==typeof n){const e=document.querySelector(n);if(!e)throw new Error(`RAGChat: Container element "${n}" not found`);this.container=e}else this.container=n;w(e),this.init()}init(){this.chatInterface=document.createElement("rag-chat-interface"),this.container.style.height=this.container.style.height||"600px",this.container.style.width=this.container.style.width||"100%",this.container.appendChild(this.chatInterface),this.setupEventListeners()}setupEventListeners(){this.chatInterface.addEventListener("rag-message-send",n=>{this.onMessageSend(n.detail)}),this.chatInterface.addEventListener("rag-citation-clicked",n=>{this.onCitationClick(n.detail)}),this.chatInterface.addEventListener("rag-connection-status",n=>{this.onConnectionStatusChange(n.detail)})}onMessageSend(n){const e=new CustomEvent("ragchat:message-send",{detail:n,bubbles:!0});document.dispatchEvent(e)}onCitationClick(n){const e=new CustomEvent("ragchat:citation-click",{detail:n,bubbles:!0});document.dispatchEvent(e)}onConnectionStatusChange(n){const e=new CustomEvent("ragchat:connection-status",{detail:n,bubbles:!0});document.dispatchEvent(e)}clearMessages(){this.chatInterface&&this.chatInterface.clearMessages()}getMessages(){return this.chatInterface?this.chatInterface.getMessages():[]}getSessionId(){return this.chatInterface?this.chatInterface.getSessionId():null}destroy(){this.chatInterface&&this.chatInterface.remove()}}function S(n,e={}){return new _(n,e)}window.RAGChat={create:S,configure:w,getConfig:k},document.addEventListener("DOMContentLoaded",()=>{const n=new CustomEvent("ragchat:ready",{detail:{version:"1.0.0"}});document.dispatchEvent(n)});var M=_;return a}()});
//# sourceMappingURL=rag-chat.d8519f2b5ea205881881.js.map